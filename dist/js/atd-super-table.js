!function(e){var t={};function i(a){if(t[a])return t[a].exports;var l=t[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,i),l.l=!0,l.exports}i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)i.d(a,l,function(t){return e[t]}.bind(null,l));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}();i(2),i(3),i(4);var l=o(i(5)),n=o(i(6));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.containerEl=t,this.responsiveEl=this.containerEl.querySelectorAll(".responsive")[0],this.dataTable=this.containerEl.querySelectorAll("table")[0],this.columns=[],this.lockTable=null,this.lockTableRear=null,this.lockedColumns=[],this.lastScrollTime=Date.now(),this.lockButtons=null,this.settings=Object.assign({stackedBreakpoint:991,maxLocked:!0},i),window.setTimeout(function(){this.loadColumns(),this.createLockButtons(),this.isTableLockable()&&(this.lockedColumns=this.getAutoLocked("data-auto-lock"),this.lockedRear=this.getAutoLocked("data-auto-lock-rear")),this.layoutTable()}.bind(this),250),window.addEventListener("resize",this.layoutTable.bind(this)),this.containerEl.addEventListener("click",this.toggleLocked.bind(this))}return a(e,[{key:"loadColumns",value:function(){var e=this,t=[];this.dataTable.querySelectorAll("th").forEach(function(i,a){var n=new l.default(t.length,i),o=[];e.dataTable.querySelectorAll("tbody tr").forEach(function(e){o.push(e.querySelectorAll("td")[a])}),n.setRows(o),t.push(n)}),this.columns=t}},{key:"getColumnByID",value:function(e){var t=null;return this.columns.forEach(function(i){i.id===e&&(t=i)}),t}},{key:"isTableLockable",value:function(){return this.containerEl.hasAttribute("data-lockable")}},{key:"isTableHeightSet",value:function(){return this.containerEl.hasAttribute("data-height")}},{key:"updateTableScrollPosition",value:function(e){this.fixedHeader.style.transform="translate3D(-"+this.responsiveEl.scrollLeft+"px, 0, 0)",Date.now()-this.lastScrollTime<20||(this.lastScrollTime=Date.now(),this.responsiveEl.scrollTop!==e.target.scrollTop&&(this.responsiveEl.scrollTop=e.target.scrollTop),this.lockTable.table&&this.lockTable.table.scrollTop!==e.target.scrollTop&&(this.lockTable.table.scrollTop=e.target.scrollTop),this.lockTableRear.table&&this.lockTableRear.table.scrollTop!==e.target.scrollTop&&(this.lockTableRear.table.scrollTop=e.target.scrollTop))}},{key:"createFixedHead",value:function(){this.fixedHeader&&(this.fixedHeader.remove(),this.fixedHeader=null),this.responsiveEl.removeEventListener("scroll",this.updateTableScrollPosition),this.fixedHeader=document.createElement("TABLE");var e=document.createElement("TR");this.fixedHeader.appendChild(document.createElement("THEAD")),this.fixedHeader.querySelector("thead").appendChild(e),this.fixedHeader.className=this.dataTable.className,this.fixedHeader.classList.add("fixed-header"),this.containerEl.appendChild(this.fixedHeader),this.dataTable.querySelectorAll("th").forEach(function(t){var i=document.createElement("TH");i.innerHTML=t.innerHTML,i.style.width=t.offsetWidth+"px",e.appendChild(i)}.bind(this)),this.responsiveEl.addEventListener("scroll",this.updateTableScrollPosition.bind(this)),this.fixedHeader.style.transform="translate3D(-"+this.responsiveEl.scrollLeft+"px, 0, 0)"}},{key:"setTableMaxHeight",value:function(){var e=parseInt(this.containerEl.getAttribute("data-height"),10);isNaN&&isNaN(e)||(this.responsiveEl.style.maxHeight=e+"px",this.responsiveEl.classList.add("set-height"))}},{key:"layoutTable",value:function(){if(this.containerEl.classList.remove("stacked","compact"),this.restoreColumnOrder(),this.isTableHeightSet()&&this.setTableMaxHeight(),this.lockTable&&(this.lockTable.destroy(),this.lockTable=null),this.lockTableRear&&(this.lockTableRear.destroy(),this.lockTableRear=null),window.innerWidth<=this.settings.stackedBreakpoint)return this.containerEl.classList.add("stacked"),void this.setStackedHeadings();if(!(this.dataTable.offsetWidth<=this.containerEl.offsetWidth)){if(this.containerEl.classList.add("compact"),this.isTableLockable()){var e=[];if(this.lockedColumns.forEach(function(t){var i=this.getColumnByID(t);i&&(e.push(i.getColumnCopy()),this.moveColumn(t))}.bind(this)),this.lockTable=new n.default(this.containerEl,this.dataTable,!1,e),this.lockTable.table&&this.lockTable.table.addEventListener("scroll",this.updateTableScrollPosition.bind(this)),e=[],this.lockedRear.forEach(function(t){var i=this.getColumnByID(t);i&&e.push(i.getColumnCopy())}.bind(this)),this.lockTableRear=new n.default(this.containerEl,this.dataTable,!0,e),this.lockTableRear.table){this.lockTableRear.table.addEventListener("scroll",this.updateTableScrollPosition.bind(this));var t=this.responsiveEl.offsetWidth-this.responsiveEl.clientWidth;this.lockTableRear.containerEl.style.transform="translate3D(-"+t+"px, 0px, 0px)"}this.calculateMaxLocked()}this.isTableHeightSet()&&this.createFixedHead()}}},{key:"setStackedHeadings",value:function(){var e=this.dataTable.querySelectorAll("th");this.dataTable.querySelectorAll("tbody tr").forEach(function(t){t.querySelectorAll("td").forEach(function(t,i){!e[i].innerText.length||e[i].innerText.match(/^\s$/)||e[i].innerText.match(/\xA0$/g)||t.setAttribute("data-heading",e[i].innerText)})})}},{key:"toggleLocked",value:function(e){if(this.isTableLockable()&&e.target.matches("[data-lock-column]")){var t=parseInt(e.target.getAttribute("data-lock-column"),10),i=this.lockedColumns.indexOf(t);i>=0?this.lockedColumns.splice(i,1):this.lockedColumns.push(t),this.layoutTable()}}},{key:"moveColumn",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.getColumnByID(e),a=this.dataTable.querySelector("thead tr"),l=this.dataTable.querySelectorAll("tbody tr");t?a.insertBefore(i.head,a.firstChild):a.appendChild(i.head,null),i.rows.forEach(function(e,i){t?l[i].insertBefore(e,l[i].firstChild):l[i].appendChild(e,null)}.bind(this))}},{key:"restoreColumnOrder",value:function(){this.columns.forEach(function(e){this.moveColumn(e.id,!1)}.bind(this))}},{key:"getAutoLocked",value:function(e){var t=[];return this.columns.forEach(function(i){i.head.hasAttribute(e)&&t.push(i.id)}),t}},{key:"createLockButtons",value:function(){this.isTableLockable()&&this.columns.forEach(function(e){var t=document.createElement("a");t.setAttribute("data-lock-column",e.id),e.head.appendChild(t)}.bind(this))}},{key:"calculateMaxLocked",value:function(){if(!1!==this.settings.maxLocked&&void 0!=this.lockTable&&this.isTableLockable()){var e=this.containerEl.offsetWidth;this.lockTable.containerEl.offsetWidth>e/2?this.dataTable.classList.add("max-locked"):this.dataTable.classList.remove("max-locked")}}}]),e}();document.querySelectorAll("[data-super-table]").forEach(function(e){new s(e)}),t.default=s},function(e,t,i){"use strict";[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})})},function(e,t,i){"use strict";window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var i=0;i<this.length;i++)e.call(t,this[i],i,this)})},function(e,t,i){"use strict";"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),a=1;a<arguments.length;a++){var l=arguments[a];if(null!=l)for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(i[n]=l[n])}return i},writable:!0,configurable:!0})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),l=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.head=i,this.rows=a,this.width=this.head?this.head.offsetWidth:0,this.headHeight=this.head?this.head.offsetHeight:0,this.rowsHeights=[]}return a(e,[{key:"setHead",value:function(e){e&&(this.head=e)}},{key:"getHead",value:function(){return this.head||null}},{key:"setRows",value:function(e){e&&(this.rows=e,this.rows.forEach(function(e){this.rowsHeights.push(e.offsetHeight)}.bind(this)))}},{key:"getRows",value:function(){return this.rows.length?this.rows:null}},{key:"getColumnCopy",value:function(){var e=[];return this.rows.forEach(function(t){e.push(t.cloneNode(!0))}),{id:this.id,head:this.head.cloneNode(!0),rows:e,width:this.width,headHeight:this.headHeight,rowsHeights:this.rowsHeights}}}]),e}();t.default=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),l=function(){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.superTableEl=t,this.dataTable=i,this.isRear=a,this.containerEl=document.createElement("div"),this.columnData=l,this.createLockTable()}return a(e,[{key:"destroy",value:function(){return this.containerEl.remove(),null}},{key:"containsColumn",value:function(e){if(this.columnData)for(var t=0,i=this.columnData.length;t<i;t++)if(this.columnData[t].id===e)return this.columnData[t];return!1}},{key:"createLockTable",value:function(){var e=this;if(this.destroy(),this.columnData.length){var t=document.createElement("thead");t.appendChild(document.createElement("tr"));var i=document.createElement("tbody");this.table=document.createElement("table"),this.table.appendChild(t),this.table.appendChild(i),this.table.className=this.dataTable.className,this.table.classList.add("lock-table"),this.table.classList.remove("max-locked"),this.isRear?(this.containerEl.classList.add("rear"),this.table.setAttribute("id","lock-table-rear")):this.table.setAttribute("id","lock-table"),this.containerEl.classList.add("lock-table-container");var a=document.createElement("div");a.classList.add("lock-table-inner"),a.appendChild(this.table),this.containerEl.appendChild(a),this.containerEl.setAttribute("aria-hidden",""),this.superTableEl.appendChild(this.containerEl);var l=0;if(this.columnData.length){this.columnData.forEach(function(e,t){this.table.querySelector("tbody").style.transform="translateY("+e.headHeight+"px)",e.head.style.width=e.width+"px",l+=e.width,this.table.querySelector("thead tr").appendChild(e.head)}.bind(this));for(var n=this.table.querySelector("tbody"),o=this.columnData[0].rows.length,s=function(t){var i=document.createElement("tr");e.columnData.forEach(function(e){e.rows[t].style.width=e.width+"px",e.rows[t].style.height=e.rowsHeights[t]+"px",i.appendChild(e.rows[t])}),n.appendChild(i)},r=0;r<o;r++)s(r)}var c=this.table.offsetWidth-this.table.clientWidth;this.table.style.width=this.table.offsetWidth+c+"px",this.containerEl.style.width=l+"px"}}}]),e}();t.default=l}]);
//# sourceMappingURL=atd-super-table.js.map